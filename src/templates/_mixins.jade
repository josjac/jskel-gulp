mixin scriptTag(url)
  - url = url || ''

  script( type="text/javascript" ).
    (function () {
      var s = document.createElement('script');
      s.type = 'text/javascript';
      s.async = true;
      s.src = '#{url}';
      var x = document.getElementsByTagName('script')[0];
      x.parentNode.insertBefore(s, x);
    })();

mixin requireTagConfig(url)
  if (handler.argv.prod)
    +scriptTag(handler.static_url(url))

  else 
    script( src!=handler.static_url('scripts/libs/requirejs/require.js'), type='text/javascript' )
    script( src!=handler.static_url('scripts/configs/require.js'), type='text/javascript' )
    script.
      requirejs.config({
        urlArgs: 'bust=' + (new Date()).getTime()
      });
    
      require(['#{handler.static_url(url)}']);


